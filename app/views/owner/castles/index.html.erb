<h1 class="container text-center my-4">Mes châteaux</h1>

<% @castles.each_with_index do |castle, index| %>

  <% index + 1%><% link_to castle.name.capitalize, castle_path(castle), :class => "text-dark" %>

  <% castle.reservations.each do |reservation| %>

    <% status = "Erreur" %>
    <% if reservation.status == "pending" %>
      <% status = "En attente de validation" %>
    <% elsif reservation.status == "accepted" %>
      <% status = "Accepté" %>
    <% elsif reservation.status == "declined" %>
      <% status = "Refusé" %>
    <% end %>

    <div class="container">
      <div class="card-trip">

         <%= cl_image_tag reservation.castle.photo.key, height: 300, width: 400, crop: :fill %>


        <div class="card-trip-infos">
          <h2><%= reservation.user.last_name %> <%= reservation.user.first_name %></h2>
          <p>Du <%= reservation.starting_date %> au <%= reservation.ending_date %></p>
          <p><%= reservation.total_price %> €</p>
          <p><%= status %></p>
          <%= link_to "Accept", accept_reservation_path(reservation), class: 'btn-outline-light rounded-pill', method: :patch %>
          <%= link_to "Decline", decline_reservation_path(reservation), class: 'btn-outline-light rounded-pill', method: :patch %>

        </div>



      </div>
    </div>

  <% end %>

<% end %>


